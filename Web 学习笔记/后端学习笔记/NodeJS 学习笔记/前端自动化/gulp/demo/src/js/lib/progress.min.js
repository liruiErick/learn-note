/*! Pseudo progress v1.1.3 | @author baijunjie | https://github.com/baijunjie/progress.js */
!function(t,i){"use strict";"function"==typeof define&&define.amd?define(i):"object"==typeof exports?module.exports=i():(t.bjj=t.bjj||{},t.bjj.progress=i())}(this,function(t){"use strict";function i(t){if(t in d.style)return t;for(var i=t.charAt(0).toUpperCase()+t.substr(1),e=["Webkit","Moz","ms","O"],s=0,n=e.length;n>s;s++){var o=e[s]+i;if(o in d.style)return o}}function e(){return d.style[l.transform]="",d.style[l.transform]="rotateY(90deg)",""!==d.style[l.transform]}function s(){if(this.requestAnimationFrame=r,!this.requestAnimationFrame){var t=0;this.requestAnimationFrame=function(i){var e=(new Date).getTime(),s=Math.max(0,16-(e-t)),n=window.setTimeout(function(){i(e+s)},s);return t=e+s,n}}this.runFunc=[],this.loopRun=!1,this.isStop=!1,this.timerID=0,this._loopCallback=n(this._loopCallback,this)}function n(t,i){if("string"==typeof i){var e=t[i];i=t,t=e}if("function"!=typeof t)return void 0;var s=Array.prototype.slice,n=s.call(arguments,2),o=function(){return t.apply(i||this,n.concat(s.call(arguments)))};return o.guid=t.guid=t.guid||p++,o}function o(i){this.hideDuration=400,this.coeStep1=.1,this.coeStep2=.01,this.coeStep3=.3,this.coeStep4=.1,this.valueStep1=20,this.valueStep2=95,this.valueStep3=100,this.valueStep4=0,this.value=0,this.targetValue=100,this.coe=1,this.isRun=!1,this.isShow=!1,this.timerID=0,this.loop=new s,this._init(),this.color(i||"#2299dd"),this._loadedHandle=n(this._loadedHandle,this),"complete"===document.readyState||t||(this.start(),this._addLoadEvent())}for(var r=window.requestAnimationFrame,h=window.cancelAnimationFrame,a=["ms","moz","webkit","o"],u=0;u<a.length&&!r;++u)r=window[a[u]+"RequestAnimationFrame"],h=window[a[u]+"CancelAnimationFrame"]||window[a[u]+"CancelRequestAnimationFrame"];h||(h=function(t){window.clearTimeout(t)});var d=document.createElement("div"),l={};l.transform=i("transform"),l.transition=i("transition"),l.transform3d=e(),d=null,s.prototype={_loopCallback:function(){for(var t=this.runFunc.length;t--;)this.runFunc[t]()===!1&&this.runFunc.splice(t,1);this.runFunc.length?this.timerID=this.requestAnimationFrame.call(window,this._loopCallback):this.loopRun=!1},add:function(t,i){if("function"!=typeof t)return this;var e=t;return i&&(e=n(t,i)),this.runFunc.unshift(e),this.loopRun?this:(this.loopRun=!0,this.isStop||(this.timerID=this.requestAnimationFrame.call(window,this._loopCallback)),this)},remove:function(t){if("function"!=typeof t)return this;for(var i=this.runFunc.length;i--;)this.runFunc[i].guid===t.guid&&this.runFunc.splice(i,1)},stop:function(){return this.isStop?this:(this.isStop=!0,h(this.timerID),this)},play:function(){return this.isStop?(this.isStop=!1,this.loopRun&&(this.timerID=this.requestAnimationFrame.call(window,this._loopCallback)),this):this}};var p=0;o.prototype={_init:function(){this.progress=document.createElement("div"),this.progressHeadLeft=document.createElement("div"),this.progressHeadRight=document.createElement("div"),this._css(this.progress,{display:"none","-webkit-pointer-events":"none","pointer-events":"none","-webkit-user-select":"none","-moz-user-select":"none","user-select":"none",position:"fixed",right:"100%",top:0,"z-index":2147483647,width:"100%",height:"2px",opacity:1}),this._css(this.progressHeadLeft,{position:"absolute",right:"-80px",top:0,width:"180px",height:"100%",opacity:.6,"border-radius":"100%",clip:"rect(-6px,90px,14px,-6px)"}),this._css(this.progressHeadRight,{position:"absolute",right:0,top:0,width:"20px",height:"100%",opacity:.6,"border-radius":"100%",clip:"rect(-6px,22px,14px,10px)"}),this.progress.appendChild(this.progressHeadLeft),this.progress.appendChild(this.progressHeadRight),this._addDocument=n(this._addDocument,this),this._addDocument()},_addDocument:function(){document.body?document.body.appendChild(this.progress):window.setTimeout(this._addDocument)},_loadedHandle:function(){this.done()},_addLoadEvent:function(){this.listenerLoad=!0,window.addEventListener?window.addEventListener("load",this._loadedHandle,!1):window.attachEvent?window.attachEvent("onload",this._loadedHandle):window.onload=this._loadedHandle},_removeLoadEvent:function(){this.listenerLoad=!1,window.removeEventListener?window.removeEventListener("load",this._loadedHandle,!1):window.detachEvent?window.detachEvent("onload",this._loadedHandle):window.onload=null},_run:function(){var t=this.value,i=this.targetValue-t,e=i*this.coe;if(Math.abs(i)>.1)t+=e,this._set(t);else{if(this._set(this.targetValue),this.targetValue!==this.valueStep1)return(this.targetValue===this.valueStep3||this.targetValue===this.valueStep4)&&this._hide(this.targetValue),this.isRun=!1,!1;this.coe=this.coeStep2,this.targetValue=this.valueStep2}},_hide:function(t){if(this.isShow){if(this.isShow=!1,t&&l.transition){this._css(this.progress,l.transition,"opacity "+this.hideDuration+"ms"),this._css(this.progress,"opacity",0);var i=this;this.timerID=window.setTimeout(function(){i._css(i.progress,"display","none"),i._css(i.progress,l.transition,""),i._set(0),i.timerID=0},this.hideDuration)}else this._css(this.progress,"display","none"),this._set(0);return this}},_show:function(){return this.isShow?void 0:(this.isShow=!0,this.timerID>0&&(window.clearTimeout(this.timerID),this._css(this.progress,l.transition,""),this._set(0),this.timerID=0),this._css(this.progress,{display:"block",opacity:1}),this)},_css:function(t,i,e){if("object"==typeof i)for(var s in i)t.style[s]=i[s];else"undefined"!=typeof e&&(t.style[i]=e);return this},_set:function(t){if(this.value=t,l.transform){var i="translate("+t+"%,0)";l.transform3d&&(i+=" translateZ(0)"),this._css(this.progress,l.transform,i)}else this._css(this.progress,"right",100-t+"%");return this},appendTo:function(t,i){return t&&t.appendChild(this.progress),i&&this._css(this.progress,i),this},color:function(t){return this._css(this.progress,"background",t),this._css(this.progressHeadLeft,"box-shadow","1px 0 6px 1px "+t),this._css(this.progressHeadRight,"box-shadow","1px 0 6px 1px "+t),this},set:function(t){return this.stop(),t=Math.max(0,Math.min(100,t)),t<this.valueStep1?(this.coe=this.coeStep1,this.targetValue=this.valueStep1):t<this.valueStep2?(this.coe=this.coeStep2,this.targetValue=this.valueStep2):t<this.valueStep3&&(this.coe=this.coeStep3,this.targetValue=this.valueStep3),this._set(t),t===this.valueStep3||t===this.valueStep4?this._hide(t):this._show(),this},stop:function(){return this.listenerLoad&&this._removeLoadEvent(),this.isRun?(this.isRun=!1,this.loop.remove(this._run),this):this},play:function(){return this.listenerLoad&&this._removeLoadEvent(),this.isRun?this:(this.isRun=!0,this.loop.add(this._run,this),this)},start:function(){return this._set(0),this.coe=this.coeStep1,this.targetValue=this.valueStep1,this._show(),this.play()},done:function(){return this.coe=this.coeStep3,this.targetValue=this.valueStep3,this.play()},fail:function(){return this.coe=this.coeStep4,this.targetValue=this.valueStep4,this.play()}};var c=new o;return c});