!function(t,i){"use strict";"object"==typeof module&&"object"==typeof exports?module.exports=i(require("jquery.animate")):"function"==typeof define&&define.amd?define(["jquery.animate"],i):(t.bjj=t.bjj||{},t.bjj.LoopRoll=i(t.jQuery))}(this,function(t){"use strict";function i(){this._init.apply(this,arguments)}function s(i,s,e){var n=t();t.each(i,function(i,s){for(var e,h=s instanceof jQuery?s:t(s),o=h.parents().addBack().filter(":hidden"),i=o.length;i--&&h.is(":hidden");)e=o.eq(i),"none"===e.css("display")&&(n=n.add(e.show()))}),"function"==typeof s&&s.call(e||this),n.hide()}var e=!1,n=navigator.appVersion.match(/MSIE (\d+\.\d)/),h=n&&n[1]-0;"Microsoft Internet Explorer"===navigator.appName&&8>=h&&(e=!0);var o=t(window),r={prevBtn:"",nextBtn:"",isVer:!1,frameRate:40},a=i.prototype;return a._init=function(i,s){var e=t.extend({},r,s);this.$prevBtn=t(e.prevBtn),this.$nextBtn=t(e.nextBtn),this.hasPrevBtn=!!this.$prevBtn.length,this.hasNextBtn=!!this.$nextBtn.length,this.isVer=e.isVer,this.frameRate=e.frameRate,this.isRoll=!1,this.isSlide=!1,this.inited=!1,this.$container=t(i).css({overflow:"hidden","user-select":"none"}),"static"===this.$container.css("position")&&this.$container.css("position","relative"),this.$content=this.$container.children().first(),this.$wrap=this.$content.wrapAll("<div>").parent().css({position:"absolute",left:0,right:0,top:0,bottom:0}),t.cssHooks.x?(this.tabAttr=this.isVer?"y":"x",t.support.transform3d&&this.$wrap.css("z",0)):this.tabAttr=this.isVer?"top":"left",this.sizeApi=this.isVer?"height":"width",this.prevTab=t.proxy(this,"prevTab"),this.nextTab=t.proxy(this,"nextTab"),this._resize=t.proxy(this,"_resize"),this._run=t.proxy(this,"_run"),this.update(),this._addEvent()},a._addEvent=function(){o.on("resize",this._resize),this.hasPrevBtn&&this.$prevBtn.on("click",this.prevTab),this.hasNextBtn&&this.$nextBtn.on("click",this.nextTab)},a._removeEvent=function(){o.off("resize",this._resize),this.hasPrevBtn&&this.$prevBtn.off("click",this.prevTab),this.hasNextBtn&&this.$nextBtn.off("click",this.nextTab)},a._resize=function(){if(t.contains(document,this.$wrap[0])){this.isRoll&&this._stop(),s(this.$wrap,function(){this.containerSize=this.$container[this.sizeApi](),this.$wrap[this.sizeApi](this.containerSize);var i=[0],s=0,e=0,n="outer"+this.sizeApi.substr(0,1).toUpperCase()+this.sizeApi.substr(1);this.$content.css("float","none").css(this.sizeApi,"").children().each(function(){e=t(this)[n](!0),s+=e,i.push(-s)}),this.itemPos=i,this.itemCount=i.length-1,this.contentSize=s},this);var i=this.$wrap.children();i[this.sizeApi](this.contentSize),this.isVer||i.css("float","left"),this._clone(),this.$wrap[this.sizeApi](this.contentCount*this.contentSize),this.totalTime=this.frameRate*this.contentSize,this.maxPos=-this.contentSize,this.inited=!0,this.isRoll?this._run():this._reset()}},a._clone=function(){this.contentCount*this.contentSize<this.containerSize+this.contentSize&&(this.contentCount++,this.$wrap.append(this.$content.clone()),this._clone())},a._getIndex=function(){var i=this.curPos,s=-1;return t.each(this.itemPos,function(t,e){return i>e?!1:void(s=t)}),s},a._gotoIndex=function(t){this.isSlide=!0,0>t&&(t=(t%this.itemCount+this.itemCount)%this.itemCount,this.curPos-=this.contentSize,this.$wrap.css(this.tabAttr,this.curPos));var i=this,s=this.itemPos[t],e={};e[this.tabAttr]=s,this.$wrap.animate(e,function(){i.isSlide=!1,i._run()})},a._reset=function(){this.curPos=parseFloat(this.$wrap.css(this.tabAttr)),this.curPos>0?this.curPos-=this.contentSize:this.curPos<=this.maxPos&&(this.curPos+=this.contentSize),this.$wrap.css(this.tabAttr,this.curPos)},a._getTime=function(){return(1-this.curPos/this.maxPos)*this.totalTime},a._run=function(){if(this.inited){this._reset();var t={};t[this.tabAttr]=this.maxPos,this.$wrap.animate(t,this._getTime(),"linear",this._run)}},a._stop=function(){this.$wrap.stop(),this._reset()},a.play=function(){this.isRoll||(this.isRoll=!0,this._run())},a.stop=function(){this.isRoll&&(this.isRoll=!1,this._stop())},a.prevTab=function(){if(!this.isSlide){this._stop();var t=this._getIndex();this._gotoIndex(--t)}},a.nextTab=function(){if(!this.isSlide){this._stop();var t=this._getIndex();this._gotoIndex(++t)}},a.update=function(){this.$wrap.children(":not(:first)").remove(),this.contentCount=1,e?window.setTimeout(this._resize,0):this._resize()},a.destroy=function(){this._removeEvent(),this.$container=null,this.$wrap=null,this.$item=null,this.$prevBtn=null,this.$nextBtn=null},i});