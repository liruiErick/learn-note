/*!
 * Slider
 * @version v1.0.0
 * @author baijunjie
 * @license MIT
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("move-event"),require("jquery")):"function"==typeof define&&define.amd?define(["move-event","jquery"],e):"object"==typeof exports?exports.Slider=e(require("move-event"),require("jquery")):t.Slider=e(t.MoveEvent,t.jQuery)}(window,function(t,e){return function(t){var e={};function i(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=14)}([function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e){var i=Array.isArray;t.exports=i},function(t,e,i){var o=i(12).Symbol;t.exports=o},function(t,e,i){var o=i(2),n=i(9),s=i(8),r="[object Null]",a="[object Undefined]",_=o?o.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?a:r:_&&_ in Object(t)?n(t):s(t)}},function(t,e,i){"use strict";i.r(e);const o={};e.default=function(t,e,i){"object"!=typeof t&&(t=[]),void 0===t.length&&(t=[t]);const n=[],s=[];for(let e,i=0;e=t[i++];)for(;e instanceof HTMLElement;){const t=e.nodeName;if(!e.getClientRects().length){n.push(e),s.push(e.style.display);let i=o[t];if(!i){const e=document.createElement(t);document.body.appendChild(e),i=window.getComputedStyle(e).display,e.parentNode.removeChild(e),"none"===i&&(i="block"),o[t]=i}e.style.display=i}if("BODY"===t)break;e=e.parentNode}"function"==typeof e&&e.call(i||this);let r=n.length;for(;r--;)n.pop().style.display=s.pop()}},function(e,i){e.exports=t},function(t,i){t.exports=e},function(t,e,i){var o=i(3),n=i(0),s="[object Number]";t.exports=function(t){return"number"==typeof t||n(t)&&o(t)==s}},function(t,e){var i=Object.prototype.toString;t.exports=function(t){return i.call(t)}},function(t,e,i){var o=i(2),n=Object.prototype,s=n.hasOwnProperty,r=n.toString,a=o?o.toStringTag:void 0;t.exports=function(t){var e=s.call(t,a),i=t[a];try{t[a]=void 0;var o=!0}catch(t){}var n=r.call(t);return o&&(e?t[a]=i:delete t[a]),n}},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){(function(e){var i="object"==typeof e&&e&&e.Object===Object&&e;t.exports=i}).call(this,i(10))},function(t,e,i){var o=i(11),n="object"==typeof self&&self&&self.Object===Object&&self,s=o||n||Function("return this")();t.exports=s},function(t,e,i){var o=i(3),n=i(1),s=i(0),r="[object String]";t.exports=function(t){return"string"==typeof t||!n(t)&&s(t)&&o(t)==r}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=u(i(13)),n=u(i(7)),s=u(i(1)),r=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),a=u(i(6)),_=u(i(5)),l=u(i(4));function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var h=(0,a.default)(window),d=function(t){},p={wrap:">:first",item:">",prevBtn:null,nextBtn:null,btnDisableClass:"disabled",loop:!1,frameRate:40,direction:"x",align:"start",alignOffset:0,autoAdsorb:!1,nextRatio:.5,activeClass:"active",initIndex:-1,duration:400,onClick:d,onSlide:d,onMoveEnd:d},f=function(){function t(e,i){var n=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._resizeHandle=function(){var t=h.width();n._winWidth!==t&&(n._winWidth=t,n._resize())},this._resize=function(){if(a.default.contains(document,n._$container[0])){n._wrapStop();var t=n._options;n._$realItem.detach(),n._$wrap.empty().append(n._$realItem),n._$item=n._$realItem,(0,l.default)(n._$wrap,function(){var t=this,e=this._sizeApiName.substr(0,1).toUpperCase()+this._sizeApiName.substr(1);this._containerSize=this._$container["inner"+e](),this._alignOffset=this._containerSize*this._posRatio+this._options.alignOffset,this._itemPos=this._realItemPos=[],this._itemSize=this._realItemSize=[];var i=this._getStartPos(this._$wrap);this._$realItem.each(function(o,n){var s=(0,a.default)(n),r=t._getStartPos(s);t._realItemPos.push(r-i),t._realItemSize.push(s["outer"+e](!0))})},n);var e=n._realItemPos[0],i=n._realItemPos[n._realMaxIndex]+n._realItemSize[n._realMaxIndex];n._itemTotalSize=n._realItemTotalSize=i-e,n._maxPos=-e,t.loop?(n._clone(2*n._containerSize+n._realItemTotalSize),n._itemCount=n._$item.length,n._maxIndex=n._itemCount-1,n._minPos=n._containerSize-(n._itemPos[n._maxIndex]+n._itemSize[n._maxIndex]),n._loopTotalTime=t.frameRate*(n._maxPos-n._minPos)):(n._itemCount=n._realItemCount,n._maxIndex=n._realMaxIndex,n._minPos=n._containerSize-i,0===n._posRatio?n._minPos=Math.min(n._minPos,n._maxPos):1===n._posRatio?n._maxPos=Math.max(n._minPos,n._maxPos):n._minPos>n._maxPos&&(n._minPos=n._maxPos=.5*(n._minPos-n._maxPos))),n._inited=!0,n._slide(n._calcPos(n._getValidIndex(n._curIndex,!0)),0)}},this._startHandle=function(t,e){n._linkDisabled=!1,n._moveStartPos=n._directionY?e.y:e.x,n._$wrap.css("cursor","-webkit-grabbing")},this._moveHandle=function(t,e){var i=n._directionY,o=i?"y":"x";(i?n._moveVertical:n._moveHorizontal)||((i?n._moveVertical=e.dxStepAbs<=e.dyStepAbs:n._moveHorizontal=e.dxStepAbs>=e.dyStepAbs)?(n._wrapStop(),n._moveWrapStartPos=parseInt(n._$wrap.css(n._posProp)),n._linkDisabled=!0):n._moveStartPos=e[o]),(i?n._moveVertical:n._moveHorizontal)&&(t.preventDefault(),n._moveDistance=e[o]-n._moveStartPos,n._moveTo(n._getValidPos(n._moveWrapStartPos+n._moveDistance)))},this._endHandle=function(t,e){var i=n._options,o=n._directionY;if(n._$wrap.css("cursor","-webkit-grab"),o?n._moveVertical:n._moveHorizontal){n._moveVertical=!1,n._moveHorizontal=!1;var s=o?e.swipeBottom:e.swipeRight,r=o?e.swipeTop:e.swipeLeft;if(s||r)s?n._prev():r&&n._next();else{var a=n._moveDistance>0,_=n._calcIndex(n._curPos,a);i.autoAdsorb?n._goto(n._calcAdsorb(_,n._curPos,a)):(n._curIndex=_,n._slide(n._curPos))}}},this._clickHandle=function(t){if(n._linkDisabled)return t.preventDefault();var e=n._$item.index(t.currentTarget);n._setActive(e),n._options.onClick.call(n,{index:n._getValidIndex(e,!0),dom:t.currentTarget})},this._prev=function(){if(!n._gotoPrev){n._gotoPrev=!0,n._gotoNext=!1,n._wrapStop();for(var t=n._options,e=n._curPos,i=n._itemPos,o=n._itemSize,s=n._posRatio,r=n._containerSize,a=-e,_=void 0,l=void 0,u=void 0,c=void 0,h=0;h<=n._maxIndex;h++)if(l=i[h],u=o[h],l>a||l+.5*u>a){c=h,_=-(l+u)+r,a=l+u-r*(1-s);break}t.loop&&_>n._maxPos&&(a-=n._adjustByTargetPos(_),c=n._maxIndex);for(var d=0;d<=c;d++)if((l=i[d])+(u=o[d])*s>=a){c=d;break}c===n._curIndex&&c--,t.loop||(c=n._limitIndex(c)),n._goto(c,null,function(){return n._gotoPrev=!1})}},this._next=function(){if(!n._gotoNext){n._gotoNext=!0,n._gotoPrev=!1,n._wrapStop();for(var t=n._options,e=n._curPos,i=n._itemPos,o=n._itemSize,s=n._posRatio,r=n._containerSize,a=r-e,_=void 0,l=void 0,u=void 0,c=void 0,h=n._maxIndex;h>=0;h--)if((l=i[h])+(u=o[h])<a||l+.5*u<a){c=h,_=-l,a=l+r*s;break}n._options.loop&&_<n._minPos&&(a-=n._adjustByTargetPos(_),c=0);for(var d=n._maxIndex;d>=c;d--)if((l=i[d])+(u=o[d])*s<=a){c=d;break}c===n._curIndex&&c++,t.loop||(c=n._limitIndex(c)),n._goto(c,null,function(){return n._gotoNext=!1})}},this._createApi=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];Object.values(e).forEach(function(t){var e=void 0,i=void 0;(0,o.default)(t)?e=i=t:(0,s.default)(t)&&(e=t[0],i=t[1]),n[i]=function(){for(var t=arguments.length,i=Array(t),o=0;o<t;o++)i[o]=arguments[o];return n["_"+e].apply(n,i),n}})},this.destroy=function(){n._$wrap.css({display:"",cursor:""}),n._removeEvent(),Object.getOwnPropertyNames(n).forEach(function(t){delete self[t]}),n.__proto__=Object.prototype},this._$container=(0,a.default)(e),!this._$container.length)throw new Error("No container were found！");this._options=a.default.extend({},p,i),this._init()}return r(t,[{key:"_init",value:function(){var t=this._options;if(this._$wrap=this._$container.find(t.wrap).css({display:"inline-block",cursor:"-webkit-grab"}),!this._$wrap.length)throw new Error("No child elements inside the slider were found！");this._$prevBtn=(0,a.default)(t.prevBtn),this._$nextBtn=(0,a.default)(t.nextBtn),this._$prevBtn.length||(this._$prevBtn=null),this._$nextBtn.length||(this._$nextBtn=null),this._posRatio="end"===t.align?1:"center"===t.align?.5:0,this._directionY="y"===t.direction,this._sizeApiName=this._directionY?"height":"width",this._startPropName=this._directionY?"top":"left",a.default.cssHooks.x?(this._posProp=this._directionY?"y":"x",a.default.support.transform3d&&this._$wrap.css("z",0)):(this._posProp=this._directionY?"top":"left","static"===this._$wrap.css("position")&&this._$wrap.css("position","relative")),this._inited=!1,this._isRun=!1,this._isRoll=!1,this._gotoPrev=!0,this._gotoNext=!1,this._linkDisabled=!1,this._curPos=0,this._winWidth=h.width(),this._addEvent(),this._update(t.initIndex),this._createApi("update","prev","next","goto","setActive","run","stop")}},{key:"_addEvent",value:function(){var t=this._options;h.on("resize",this._resizeHandle),this._$wrap.on("click",t.item,this._clickHandle),this._$prevBtn&&this._$prevBtn.on("click",this._prev),this._$nextBtn&&this._$nextBtn.on("click",this._next),this._moveWrapStartPos=0,this._moveHorizontal=!1,this._moveVertical=!1,this._moveStartPos=0,this._moveDistance=0,this._moveEvent=new _.default({holder:this,obj:this._$wrap,start:this._startHandle,move:this._moveHandle,end:this._endHandle})}},{key:"_removeEvent",value:function(){var t=this._options;h.off("resize",this._resizeHandle),this._$wrap.off("click",t.item,this._clickHandle),this._$prevBtn&&this._$prevBtn.off("click",this._prev),this._$nextBtn&&this._$nextBtn.off("click",this._next),this._moveEvent&&this._moveEvent.destroy(),this._moveEvent=null}},{key:"_update",value:function(t){var e=this._options;this._$realItem=this._$wrap.find(e.item),this._realItemCount=this._$realItem.length,this._realMaxIndex=this._realItemCount-1,this._curIndex=this._isValidIndex(t,!0)?t:this._getDefaultAlignIndex(),this._resize()}},{key:"_clone",value:function(t,e){var i=this;e=e||0,this._itemTotalSize<t&&(this._$item=this._$item.add(this._$realItem.clone().appendTo(this._$wrap)),this._itemTotalSize+=this._realItemTotalSize,e++,this._itemPos=this._itemPos.concat(this._realItemPos.map(function(t){return t+e*i._realItemTotalSize})),this._itemSize=this._itemSize.concat(this._realItemSize),this._clone(t,e))}},{key:"_moveTo",value:function(t,e,i){var o=this;(0,n.default)(e)&&e>0?this._$wrap.animate(c({},this._posProp,t),e,function(){o._curPos=t,i&&i.call(o)}):(this._$wrap.css(c({},this._posProp,t)),this._curPos=t,i&&i.call(this))}},{key:"_goto",value:function(t,e,i){this._curIndex=this._getValidIndex(t),this._slide(this._calcPos(this._curIndex),e,i)}},{key:"_slide",value:function(t,e,i){var o=this;this._wrapStop();var s=this._options,r=void 0;r=s.loop?t+this._adjustByTargetPos(t):this._limitPos(t);var a=this._getValidIndex(this._curIndex,!0),_=this._$realItem[a],l=this._itemPos[this._curIndex]+r;s.onSlide.call(this,{offset:l,index:a,dom:_}),this._moveTo(r,this._curPos===r?0:(0,n.default)(e)?e:s.duration,function(){i&&i.call(o),o._updateBtn(),s.onMoveEnd.call(o,{offset:l,index:a,dom:_}),o._isRun&&o._rollStart()})}},{key:"_updateBtn",value:function(){if(!this._options.loop){var t=this._options.btnDisableClass;this._minPos<this._maxPos?(this._$prevBtn&&(this._curPos>=this._maxPos?this._$prevBtn.addClass(t):this._$prevBtn.removeClass(t)),this._$nextBtn&&(this._curPos<=this._minPos?this._$nextBtn.addClass(t):this._$nextBtn.removeClass(t))):(this._$prevBtn&&this._$prevBtn.addClass(t),this._$nextBtn&&this._$nextBtn.addClass(t))}}},{key:"_setActive",value:function(t){var e=this,i=this._options.activeClass;this._$item.removeClass(i),t>=0&&(t=this._getValidIndex(t,!0),this._$item.each(function(o,n){o%e._realItemCount===t&&(0,a.default)(n).addClass(i)}))}},{key:"_getStartPos",value:function(t){return t[0].getBoundingClientRect()[this._startPropName]-parseFloat(t.css("margin-"+this._startPropName))}},{key:"_calcPos",value:function(t){return this._alignOffset-(this._itemPos[t]+this._itemSize[t]*this._posRatio)}},{key:"_calcIndex",value:function(t,e){for(var i=this._itemPos,o=this._itemSize,n=this._alignOffset-t,s=void 0,r=void 0,a=void 0,_=0,l=this._itemCount;_<l;_++)if((s=i[_])>=n)return 0===_?0:(a=(r=i[_-1]+o[_-1])+.5*(s-r))>n?_-1:a<n?_:e?_:_-1;return this._maxIndex}},{key:"_calcAdsorb",value:function(t,e,i){var o=this._alignOffset-e,n=i?1-this._options.nextRatio:this._options.nextRatio,s=this._itemPos[t]+this._itemSize[t]*n,r=this._posRatio;return i?t=s>=o?t-(0!==r?1:0):t+(0!==r?0:1):i||(t=s<=o?t+(1!==r?1:0):t-(1!==r?0:1)),this._options.loop?this._getValidIndex(t):this._limitIndex(t)}},{key:"_getDefaultAlignIndex",value:function(){return 1===this._posRatio?this._realMaxIndex:.5===this._posRatio?Math.round(.5*this._realMaxIndex):0}},{key:"_isValidIndex",value:function(t,e){var i=e?this._realMaxIndex:this._maxIndex;return(0,n.default)(t)&&t>=0&&t<=i}},{key:"_getValidIndex",value:function(t,e){var i=e?this._realItemCount:this._itemCount;return(t%i+i)%i}},{key:"_limitIndex",value:function(t,e){var i=e?this._realMaxIndex:this._maxIndex;return Math.max(0,Math.min(i,t))}},{key:"_limitPos",value:function(t){return Math.max(this._minPos,Math.min(this._maxPos,t))}},{key:"_getValidPos",value:function(t){var e=this._minPos,i=this._maxPos;if(this._options.loop){var o=this._realItemTotalSize;t<e?t=e+o+(t-e)%o:t>i&&(t=i-o+(t-i)%o)}else t<e?t=e+.3*(t-e):t>i&&(t=i+.3*(t-i));return t}},{key:"_adjustByTargetPos",value:function(t){var e=this._getValidPos(t)-t;return e&&(this._moveTo(this._curPos+e),this._curIndex=this._calcIndex(this._curPos,t-this._curPos>0)),e}},{key:"_getCurPos",value:function(){return parseFloat(this._$wrap.css(this._posProp))}},{key:"_getRemainTime",value:function(){return(this._curPos-this._minPos)/(this._maxPos-this._minPos)*this._loopTotalTime}},{key:"_rollStart",value:function(){var t=this;this._options.loop&&this._inited&&this._isRun&&!this._isRoll&&(this._isRoll=!0,this._curPos<=this._minPos&&this._moveTo(this._curPos+this._realItemTotalSize),this._$wrap.animate(c({},this._posProp,this._minPos),this._getRemainTime(),"linear",function(){t._wrapStop(),t._rollStart()}))}},{key:"_wrapStop",value:function(){this._isRoll=!1,this._gotoPrev=!1,this._gotoNext=!1,this._$wrap.stop(),this._curPos=this._getCurPos()}},{key:"_run",value:function(){this._options.loop&&!this._isRun&&(this._isRun=!0,this._rollStart())}},{key:"_stop",value:function(){this._isRun&&(this._isRun=!1,this._wrapStop())}}]),t}();e.default=f,t.exports=e.default}])});