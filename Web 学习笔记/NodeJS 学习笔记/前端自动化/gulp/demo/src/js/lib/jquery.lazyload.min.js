!function(t,e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(t.jQuery)}(this,function(t){"use strict";function e(t){return function(e,o){var r=o||{},n=i(e[0]||e),s=i(r.container?r.container[0]||r.container:window);return n.empty||s.empty?void 0:t.call(n,n,r.threshold?s.pad(r.threshold):s)}}function i(e){if(!(this instanceof i))return new i(e);if(e===window)this.top=i.gbcr?0:o.scrollTop(),this.left=i.gbcr?0:o.scrollLeft(),this.bottom=this.top+(window.innerHeight||o.height()),this.right=this.left+(window.innerWidth||o.width());else if(i.gbcr){var r=e.getBoundingClientRect();this.top=r.top,this.left=r.left,this.bottom=r.bottom,this.right=r.right}else{var n=t(e);if(n.is(":visible")){var s=n.offset();this.top=s.top,this.left=s.left,this.bottom=this.top+n.outerHeight(),this.right=this.left+n.outerWidth()}else this.top=this.left=this.bottom=this.right=0}this.empty=0===this.top&&0===this.bottom&&0===this.left&&0===this.right}var o=t(window);return t.fn.lazyload=function(e){function r(){var e,o,r=0,n=[],s=[],l=h.threshold,c=h.failure_limit,d=h.skip_invisible,u=h.prune_detached;f.each(function(){if(this.loaded)return n.push(this);e=e||i(a[0]).pad(l);var f=this;if(!d){var h=t(this);if(h.is(":hidden")){f=h.closest(":visible")[0];for(var p,g=h.parentsUntil(f).andSelf(),m=0,v=g.length;v>m&&(p=g.eq(m),"none"!==p.css("display"));m++)f=p[0]}}if(o=i(f).compareTo(e),void 0===o&&u&&!t.contains(document,this))n.push(this);else if(0===o)s.push(this),r=0;else if(1===o)return r++<c}),f=f.not(n),setTimeout(function(){t(s).trigger("appear")},0)}function n(e){r(),f.length&&e&&t(e.currentTarget).one(e.type,n)}function s(){var e=this,i=t(e),o=i.attr(h.src_attribute),r=i.attr(h.size_attribute);return o?void(o!==i.data("original-image")&&(e.loaded=!1,(void 0===i.attr("src")||""===i.attr("src"))&&i.is("img")&&i.attr("src",h.placeholder),i.off("appear"),i.one("appear",function(){e.loaded||(h.appear.call(e,f.length,h),t("<img>").one("load error",function(t){if("error"===t.type)return h.error.call(e,f.length,h);var n="show"!==h.effect||h.effect_speed;n&&i.hide(),i.is("img")&&!r?i.attr("src",o):(i.data("background-image",i.css("background-image")),i.css({"background-image":"url('"+o+"')","background-position":"center","background-repeat":"no-repeat","background-size":r||"100% 100%"})),n&&i[h.effect](h.effect_speed),h.load.call(e,f.length,h)}).attr("src",o),e.loaded=!0,i.data("original-image",o))}),l||(i.off(h.event),i.one(h.event,function(){i.trigger("appear")})))):(e.loaded=!0,i.data("original-image",o),void(""===o&&(i.is("img")?i.attr("src",h.placeholder):i.css("background-image",i.data("background-image")))))}var a,f=this,h={threshold:0,failure_limit:0,event:"scroll touchmove",effect:"fadeIn",container:window,src_attribute:"data-src",size_attribute:"data-size",skip_invisible:!1,prune_detached:!1,appear:t.noop,load:t.noop,error:t.noop,placeholder:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="};e&&(void 0!==e.failurelimit&&(e.failure_limit=e.failurelimit,delete e.failurelimit),void 0!==e.effectspeed&&(e.effect_speed=e.effectspeed,delete e.effectspeed),t.extend(h,e)),a=void 0===h.container||h.container===window?o:t(h.container);var l=!!h.event.match(/scroll|touchmove/);return l&&(a.one(h.event,n),o.one("resize",n),r()),this.each(s),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&o.bind("pageshow",function(e){e.originalEvent&&e.originalEvent.persisted&&f.each(function(){t(this).trigger("appear")})}),this.update=function(){if(this.selector){for(var e=this.length;e--;)delete this[e];this.length=0,t.merge(this,t(this.selector)),this.each(s),f=this,l&&(a.off(h.event,n),a.one(h.event,n),o.off("resize",n),o.one("resize",n))}return l&&r(),this},this.allshow=function(){return f.trigger("appear"),this},this},t.extend({belowthefold:e(function(t,e){return t.top>e.bottom}),rightoffold:e(function(t,e){return t.left>e.right}),abovethetop:e(function(t,e){return t.bottom<e.top}),leftofbegin:e(function(t,e){return t.right<e.left}),inviewport:e(function(t,e){return 0===t.compareTo(e)})}),t.extend(t.expr[":"],{"below-the-fold":function(e){return t.belowthefold(e)},"above-the-top":function(e){return t.abovethetop(e)},"right-of-screen":function(e){return t.rightoffold(e)},"left-of-screen":function(e){return t.leftofbegin(e)},"in-viewport":function(e){return t.inviewport(e)},"above-the-fold":function(e){return!t.belowthefold(e)},"right-of-fold":function(e){return t.rightoffold(e)},"left-of-fold":function(e){return!t.rightoffold(e)}}),i.gbcr=void 0!==document.documentElement.getBoundingClientRect,i.prototype.pad=function(t){return this.top-=t,this.left-=t,this.bottom+=t,this.right+=t,this},i.prototype.compareTo=function(t){return this.empty||t.empty?void 0:this.bottom<t.top||this.right<t.left?-1:this.top>t.bottom||this.left>t.right?1:0},t});